:root{
  --bg: #0b0f14;
  --surface: #121820;
  --surface-2:#182230;
  --text: #e8eef6;
  --muted: #9db0c6;
  --primary: #4f8cff;
  --accent: #22d1b7;
  --danger: #ff6b6b;
  --win: #22d160;
  --shadow: rgba(0,0,0,.4);
}

/* Light theme overrides when html[data-theme="light"] is set */
html[data-theme="light"]{
  --bg:#f7f9fc;
  --surface:#ffffff;
  --surface-2:#f0f4fa;
  --text:#09101a;
  --muted:#49566a;
  --primary:#2457e6;
  --accent:#12a594;
  --danger:#d7263d;
  --win:#17a34a;
  --shadow: rgba(0,0,0,.08);
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg); color:var(--text);
  display:flex; flex-direction:column; gap:0;
}

.app-header, .app-footer{
  display:flex; align-items:center; justify-content:space-between;
  padding:1rem clamp(1rem, 3vw, 2rem);
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  backdrop-filter:saturate(120%) blur(6px);
}
.title{ font-size:clamp(1.25rem, 3vw, 1.75rem); font-weight:800; letter-spacing:.3px }
.controls{ display:flex; gap:.5rem }
.btn{
  appearance:none; border:1px solid color-mix(in oklab, var(--text) 18%, transparent);
  background:var(--surface); color:var(--text);
  padding:.6rem .9rem; border-radius:.75rem; cursor:pointer; display:inline-flex; gap:.5rem; align-items:center;
  transition: transform .12s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
  box-shadow: 0 6px 20px -8px var(--shadow);
}
.btn:hover{ transform: translateY(-1px); background:var(--surface-2) }
.btn:active{ transform: translateY(0) scale(.98) }
.btn:focus-visible{ outline:2px solid var(--primary); outline-offset:2px }
.icon{ filter:saturate(120%) }

.app-main{ flex:1; display:grid; grid-template-rows:auto 1fr; gap:1rem; padding:1rem clamp(1rem, 3vw, 2rem); }
.status-panel{ display:grid; grid-template-columns:1fr auto; gap:1rem; align-items:center }
.status{ font-weight:600 }
.scoreboard{ display:flex; gap:.75rem; background:var(--surface); border:1px solid color-mix(in oklab, var(--text) 12%, transparent); border-radius:.75rem; padding:.25rem; }
.score{ display:flex; gap:.5rem; align-items:center; padding:.25rem .5rem; border-radius:.5rem; background:var(--surface-2) }
.score .label{ font-weight:700 }
.score .value{ font-variant-numeric:tabular-nums; font-weight:700 }

.board-wrapper{ display:grid; place-items:center; padding:clamp(.5rem, 2vw, 1rem) }
.board{
  --size: min(88vw, 540px);
  width:var(--size); height:var(--size);
  display:grid; grid-template-columns:repeat(3, 1fr); grid-template-rows:repeat(3, 1fr);
  gap:.6rem; padding:.6rem; background:var(--surface);
  border-radius:1rem; border:1px solid color-mix(in oklab, var(--text) 12%, transparent);
  box-shadow: 0 12px 30px -12px var(--shadow);
}
.cell{
  position:relative; display:grid; place-items:center; font-size:clamp(2.2rem, 8vw, 4rem); font-weight:800;
  border:none; border-radius:.75rem; cursor:pointer; user-select:none;
  color:var(--text); background:var(--surface-2);
  transition: transform .12s ease, background .25s ease, color .25s ease, box-shadow .2s ease;
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--text) 8%, transparent);
}
.cell:hover{ background:color-mix(in oklab, var(--surface-2) 70%, var(--primary) 30%) }
.cell:disabled{ cursor:not-allowed; opacity:.85 }
.cell:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }
.cell.x{ color: var(--primary) }
.cell.o{ color: var(--accent) }
.cell.win{ animation: winPulse .9s ease-in-out 0s 1 both; box-shadow: 0 0 0 3px color-mix(in oklab, var(--win) 60%, transparent) }

@keyframes winPulse{
  0%{ transform: scale(1) }
  35%{ transform: scale(1.06) }
  100%{ transform: scale(1) }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *{ transition:none !important; animation:none !important }
}

/* Light/Dark theme binding */
html{ color-scheme: dark }
html[data-theme="light"]{ color-scheme: light }

/* Footer */
.app-footer{ color:var(--muted); font-size:.9rem; justify-content:center }